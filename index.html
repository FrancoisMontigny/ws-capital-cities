<!DOCTYPE html>
<html>
	<head>
		<title>CAPITALS SEARCH ENGINE</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="css/style.css" />
		<script src="js/autocomplete.js"></script>
	</head>
	<body>
			<div class="container-fluid">
				<form class="row navbar navbar-dark bg-dark"  autocomplete="off">
					<h1 class="col navbar-brand">CAPITALS SEARCH ENGINE</h1>
					<div class="col-3">
						<div id="autocomplete" class="autocomplete">
						<input id="recherche" class="form-control mdb-autocomplete" type="text" placeholder="Une capitale ou un pays" value="http://dbpedia.org/resource/" />
						</div>
					</div>
					<button class="col-1 btn btn-success" type="submit"><i class="fas fa-search"></i></button>
				</form>
				<div class="row">
				</div>
				<div class="row jumbotron">
					<h2 class="col display-1" style="text-align: center;" id="nom">Paris</h2>
				</div>
				<div class="row container-fluid">
					<div class="row">
						<div class="col-8">
							<p>
								<img class="rounded float-left" src="images/blason.svg" style="width: 250px; margin-right: 20px;" alt="blason"/>
								<span id="description">
								Paris (prononcé [pa.ʁi] ) est la capitale de la France. Elle se situe au cœur d'un vaste bassin sédimentaire aux sols fertiles et au climat tempéré, le bassin parisien, sur une boucle de la Seine, entre les confluents de celle-ci avec la Marne et l'Oise. Ses habitants s’appellent les Parisiens. Paris est également le chef-lieu de la région Île-de-France et l'unique commune française qui est en même temps un département. Commune centrale de la Métropole du Grand Paris, créée en 2016, elle est divisée en arrondissements, comme les villes de Lyon et de Marseille, au nombre de vingt. L’État y dispose de prérogatives particulières exercées par le préfet de police de Paris. Ville la plus peuplée de France, elle est troisième parmi les aires urbaines européennes derrière Moscou et Istanbul et la 29e plus peuplée du monde. Paris compte au 1er janvier 2013 plus de 2,2 millions d'habitants. L'agglomération parisienne s’est largement développée au cours du XXe siècle, rassemblant 10,6 millions d'habitants au 1er janvier 2013 et son aire urbaine (l'agglomération et la couronne périurbaine) comptait 12,4 millions d'habitants. La position de Lutèce, sur une île permettant le franchissement du grand fleuve navigable qu'est la Seine par une voie reliant le Nord et le Sud des Gaules, en fait dès l'Antiquité une cité importante, capitale des Parisii, puis lieu de séjour d'un empereur romain. Sa position au centre du territoire contrôlé par les rois Francs la fait choisir comme capitale de la France à la place de Tournai. Située au cœur d'un territoire agricole fertile avec un climat humide et doux, Paris devient une des principales villes de France au cours du Xe siècle, avec des palais royaux, de riches abbayes et une cathédrale ; au cours du XIIe siècle, avec l'Université de Paris, la cité devient un des premiers foyers en Europe pour l’enseignement et les arts. Le pouvoir royal se fixant dans cette ville, son importance économique et politique ne cesse de croître. Ainsi, au début du XIVe siècle, Paris est l'une des villes les plus importantes du monde chrétien. Au XVIIe siècle, elle est la capitale de la principale puissance politique européenne, au XVIIIe siècle l'un des plus grands centres culturels de l’Europe et au XIXe siècle la capitale des arts et des plaisirs. Paris joue donc un rôle culturel, politique et économique majeur dans l’histoire de l'Europe et du monde occidental au cours du IIe millénaire. Symbole de la culture française, abritant de nombreux monuments, la ville, surnommée la Ville Lumière, attire dans les années 2000 près de 30 millions de visiteurs par an ce qui en fait une des capitales les plus visitées au monde. Paris occupe également une place prépondérante dans le milieu de la mode et du luxe. La ville est, avec sa banlieue, la capitale économique et commerciale de la France, ainsi que sa première place financière et boursière. La région parisienne, avec un produit intérieur brut (PIB) de 649 milliards d'euros en 2014, est un acteur économique européen majeur. L'Île-de-France est la huitième région la plus riche d'Europe avec un PIB par habitant 46 600 € en 2013 contre 86 400 pour le Grand Londres. Paris est le siège de plusieurs organisations internationales comme l'UNESCO ou l'OCDE. Elle est la première région européenne par le PIB régional, devant la Rhénanie du Nord-Westphalie (627 milliards) et le Grand Londres (509 milliards). La densité de ses réseaux ferroviaire, autoroutier et de ses structures aéroportuaires en font un point de convergence pour les transports nationaux et internationaux. Cette situation résulte d’une longue évolution, en particulier des conceptions centralisatrices des monarchies et des républiques, qui donnent un rôle considérable à la capitale dans le pays et tendent à y concentrer les institutions. Depuis les années 1960, les politiques gouvernementales oscillent toutefois entre déconcentration et décentralisation.</span>
							</p>
						</div>
						<div class="col-4">
							<img class="img-thumbnail" src="images/paris.jpg" alt="image de paris"></img>
							<div class="container-fluid">
								<div class="row">
									<p class="col">
										Nom local
									</p>
									<p class="col" id="nom-local">
										Paris (fr)
									</p>
								</div>
								<div class="row">
									<p class="col">
										Pays
									</p>
									<p class="col" id="pays">
										France
									</p>
								</div>
								<div class="row">
									<p class="col">
										Continent
									</p>
									<p class="col" id="continent">
										Europe
									</p>
								</div>
								<div class="row">
									<p class="col">
										Région du pays
									</p>
									<p class="col" id="region">
										Île-de-France
									</p>
								</div>
								<div class="row">
									<p class="col">
										Gentillé
									</p>
									<p class="col" id="gentille">
										Parisiens
									</p>
								</div>
								<div class="row">
									<p class="col">
										Maire
									</p>
									<p class="col" id="maire">
										Anne Hidalgo
									</p>
								</div>
								<div class="row">
									<p class="col">
										Nombre d'habitants
									</p>
									<p class="col" id="population">
										10 000 000 hab.
									</p>
								</div>
								<div class="row">
									<p class="col">
										Densité
									</p>
									<p class="col" id="densite">
										100 000 hab./km²
									</p>
								</div>
								<div class="row">
									<p class="col">
										Superficie
									</p>
									<p class="col" id="superficie">
										100 km²
									</p>
								</div>
								<div class="row">
									<p class="col">
										Altitude
									</p>
									<p class="col" id="altitude">
										100 m
									</p>
								</div>
								<div class="row">
									<p class="col">
										Altitude minimum
									</p>
									<p class="col" id="altitude-min">
										80 m
									</p>
								</div>
								<div class="row">
									<p class="col">
										Altitude maximum
									</p>
									<p class="col" id="altitude-max">
										150 m
									</p>
								</div>
								<div class="row">
									<p class="col">
										Latitude
									</p>
									<p class="col" id="latitude">
										45.07891825
									</p>
								</div>
								<div class="row">
									<p class="col">
										Longitude
									</p>
									<p class="col" id="longitude">
										4.5214843541
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div id="acteur"></div>
	</body>
	<script type="text/javascript">
		var query = encodeURIComponent('select distinct ?capital where '+
			'{'+
			'?country a dbo:Country.'+
			'?country dbo:flag ?flag.'+
			'{'+
			 ' {?country dbo:capital ?capital}'+
			  'UNION'+
			  '{?country dbp:capital ?capital}'+
			'}'+
			'?country <http://purl.org/linguistics/gold/hypernym> ?type.'+
			'FILTER (?type = dbr:State || ?type = dbr:Country || ?type = dbr:Republic || ?type = dbr:Kingdom || '+
			'?type = dbr:Democracy || ?type = dbr:Enclave || ?type = dbr:Microstate || ?type = dbr:Monarchy || ?type = dbr:Nation || ?type = dbr:United)'+
			'FILTER NOT EXISTS {?country dbo:dissolutionYear ?capitalear}'+
			'FILTER NOT EXISTS {?country dbo:dissolutionDate ?date}'+
			'FILTER NOT EXISTS {?capital a dbo:Person}'+
			'}'+
			'order by ?capital');
		var url = 'http://dbpedia.org/sparql/?default-graph-uri=http%3A%2F%2Fdbpedia.org&query='+ query +'&format=json';
		console.log(url);
		$.getJSON(url+"&callback=?", function(resultats) {
			console.log(resultats.results.bindings);
			var countries = [];
			resultats.results.bindings.forEach(function(element) {
				countries.push(element.capital.value);
			});
			console.log(countries);
			autocomplete(document.getElementById('recherche'), document.getElementById("autocomplete"), countries);
		});
	</script>
</html>